# 计划 026: L2阶段内容与楼层系统

## 任务目标

本计划涵盖两个连续的主要任务：
1.  **L2阶段内容与平衡**: 设计并实现玩家L2阶段的完整游戏体验。这包括创建三种新的L2怪物，设计新道具（铁剑、小回复药），并对玩家L2到L3的成长曲线（属性、经验值）进行精确的数值平衡。
2.  **楼层切换系统**: 实现连接不同楼层的“楼梯”功能，使玩家能够在已完成的楼层间移动。

## 执行计划

### 第一部分：L2内容与平衡

1.  **探索与分析**: 深入代码，找出战斗、经验、属性加成等核心公式。
2.  **数值设计**: 基于公式和用户提出的约束（如击杀回合数、伤害值等），计算并设计所有新怪物、道具和玩家L3的属性。
3.  **内容实现**: 创建所有新内容的JSON数据文件，并实现小回复药的使用逻辑。
4.  **自动化校验**: 编写一个强大的`gamedata-checker.ts`校验脚本，将所有数值约束代码化，用于持续验证设计的正确性。
5.  **生成地图**: 创建`mapdata/floor_02.json`文件，并布置新的怪物和道具。
6.  **迭代与反馈**: 通过校验脚本和用户反馈，反复迭代和优化数值，直至所有约束都得到满足。

### 第二部分：楼层切换系统

1.  **探索与分析**: 研究现有代码，确定楼层加载和状态管理的机制。
2.  **功能实现**:
    *   在地图数据中定义“楼梯”实体及其目标。
    *   在核心逻辑中添加对“楼梯”实体的交互触发。
    *   （后发现此功能大部分已实现，工作重点转为验证和修复）。
3.  **内容实现**: 创建`floor_03.json`作为占位符，并在`floor_01.json`和`floor_02.json`中添加楼梯实体，确保坐标的逻辑一致性。
4.  **测试与验证**: 编写新的单元测试来验证楼层切换逻辑，并修复因此次代码变更而导致的其他测试回归问题。

### 最终交付

- 提交一个包含了所有新功能、数据、测试和文档的完整代码包。
